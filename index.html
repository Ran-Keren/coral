<!doctype html>
<html lang="he" dir="rtl">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1" />
    <title>ğŸ§¼ ×¡×‘×•×Ÿ ×˜×‘×¢×™ ××—×œ×‘ ××: ×”×–× ×” ××”×× ×œ×ª×™× ×•×§</title>
    <style>
        :root{
            --gap:18px;
            --accent:#00695C; /* Dark Teal - for a natural/calm feel */
            --bg:#e0f7fa; /* Light Cyan Background */
            --text:#222;
            --success: #28a745;
            --error: #dc3545;
            --sidebar-width: 250px;
            --soft-white: #fefefe; 
        }
        html,body{
            height:100%;
            margin:0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans Hebrew', sans-serif;
            background: var(--bg);
            color:var(--text);
            overflow-x: hidden; 
        }
        /* FIXED: Adjusted padding-top now that logo is static */
        .app{min-height:100vh;display:flex;align-items:center;justify-content:center;padding:24px;padding-top: 24px;box-sizing:border-box; flex-direction: column;}
        
        .card{
            width:100%;
            max-width:1100px;
            background:linear-gradient(180deg,var(--soft-white),#fbfbfb);
            border-radius:16px;
            box-shadow:0 12px 40px rgba(0,0,0,0.15);
            overflow:hidden;
            display:block; /* Changed from flex to block */
            /* Removed: gap:var(--gap); flex-direction:row-reverse; */
        }
        
        /* ADJUSTED: Content padding reset for desktop */
        .content{flex:1;min-width:260px;padding:28px;display:flex;flex-direction:column;gap:14px}
        
        /* Typography */
        h1{
            margin:0;
            font-size:26px; 
            color: var(--accent); 
            text-align: right; 
        }
        
        /* FIXED: Logo Style - Static positioning, centered block (non-floating) */
        .logo-header-wrapper {
            position: static; 
            margin: 0 auto 20px auto; /* Centering block and adding bottom margin */
            padding: 0; 
            z-index: 1; /* Lowered z-index */
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px; 
            background: none; 
            box-shadow: none; 
            /* Removed transition properties */
        }

        .logo-container { 
            /* Logo replacement styling - BIGGER */
            width: 200px; 
            height: 200px; 
            background-image: url('https://i.imgur.com/Df50Xpm.png'); 
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
            /* Hide the 'K' text */
            text-indent: -9999px;
            display: inline-block;
            margin-left: 0;
        }
        
        /* REMOVED: Logo text styling is no longer needed */
        .logo-header-wrapper h1 { display: none; } 

        h2{font-size: 22px; color: var(--accent); border-bottom: 2px solid #eee; padding-bottom: 8px; margin-top: 25px; font-weight: 700;}
        /* Adjusted h3 style for product list for better readability */
        h3{font-size: 20px; color: #444; margin: 15px 0 5px;}
        .product-list h3 {
             color: var(--accent); /* Highlight product names */
             font-weight: 800; 
             margin-bottom: 5px;
             padding-bottom: 0;
             border-bottom: none;
        }

        p{margin:0;line-height:1.7}
        .lead{font-weight:600}
        
        /* Lists and Special Text */
        .natural-text { color: var(--accent); font-weight: 600; padding: 10px 0; border-right: 3px solid var(--accent); padding-right: 10px; }
        .feature-list { list-style: none; padding: 0; margin: 10px 0; }
        .feature-list li { margin-bottom: 8px; font-size: 16px; display: flex; align-items: center; }
        .feature-list li strong { font-weight: 700; color: #333; }
        .feature-icon { color: var(--accent); font-size: 20px; margin-left: 8px; line-height: 1; }
        
        /* CTA & Coupon Styles */
        .cta{margin-top:auto;display:flex;gap:10px;flex-wrap:wrap;align-items:center}
        .btn{background:var(--accent);color:#fff;border:none;padding:12px 18px;border-radius:10px;font-weight:700;cursor:pointer;transition:all 0.3s; text-align: center; box-shadow: 0 4px 10px rgba(0,105,92,0.2);}
        .btn:hover{background:#004d40;transform:translateY(-2px);box-shadow:0 6px 16px rgba(0,105,92,0.4)}
        .price{font-size:22px;font-weight:800;color:var(--accent)}
        
        /* Coupon Styles */
        .coupon-section {
            display: flex;
            gap: 5px;
            align-items: center; 
            margin-top: 10px;
            flex-direction: column; 
        }
        .coupon-input-group {
            display: flex;
            gap: 8px;
            align-items: center;
        }
        .coupon-section input {
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 8px;
            width: 120px;
            font-size: 14px;
            text-align: center;
            direction: ltr; 
        }
        .btn-apply {
            background: var(--accent);
            border: 1px solid var(--accent);
            color: #fff;
            padding: 8px 12px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 700;
            font-size: 14px;
            transition: all 0.2s;
        }

        .coupon-msg {
            font-size: 13px;
            font-weight: 700;
            min-height: 18px;
            text-align: center;
            margin-top: 2px;
        }
        .coupon-msg.success { color: var(--success); }
        .coupon-msg.error { color: var(--error); }

        /* --- Carousel Specific CSS (UPDATED FOR FULL WIDTH AND CONTAIN) --- */
        .carousel-wrap{
            width:100%; /* Take full width of the app container */
            max-width:1100px; /* Match max width of the card */
            min-width:0; /* Allow it to shrink */
            background: transparent; /* FIXED: Changed to transparent */
            border-radius:12px;
            overflow:hidden;
            position:relative;
            display:flex;
            align-items:center;
            justify-content:center;
            /* Center block horizontally */
            margin: 0 auto 30px auto; 
            /* Added fixed height for image uniformity */
            height: 400px; 
        }
        .slides-container {
            width: 100%;
            height: 100%; 
            overflow: hidden;
        }
        .slides {
            display: flex;
            transition: transform 0.5s ease-in-out;
            width: 300%; /* Total width for 3 slides */
            height: 100%; 
            direction: ltr; 
        }
        .slide {
            flex-shrink: 0;
            width: calc(100% / 3); /* Each slide takes up 1/3 of the 300% width */
            height: 100%;
            direction: rtl; 
        }
        .slide img{
            width:100%;
            height:100%;
            object-fit: contain; /* Remains 'contain' to avoid cropping */
            display:block
        }
        /* --- End Carousel Specific CSS --- */


        /* --- Compact Modal Styles --- */
        .modal{display:none;position:fixed;z-index:1000;left:0;top:0;width:100%;height:100%;background:rgba(0,0,0,0.6);align-items:center;justify-content:center; padding: 10px;}
        .modal.show{display:flex}
        
        .modal-content{
            background:var(--soft-white);
            padding: 20px 25px; 
            border-radius:18px;
            max-width:420px;
            width:100%;
            text-align:right;
            box-shadow:0 30px 80px rgba(0,0,0,0.4); 
            margin: auto; 
            border-top: 5px solid var(--accent);
            max-height: 95vh; 
            overflow-y: auto; 
            box-sizing: border-box;
        }

        .modal h2{margin:0 0 10px;color:var(--accent); text-align: center; font-size: 22px; border-bottom: none; padding-bottom: 0;}
        .modal p{margin:5px 0;line-height:1.4}
        .modal-buttons{display:flex;gap:10px;margin-top:15px;justify-content:center; flex-wrap: wrap;}
        
        /* Compact Form Elements */
        select{width:100%;padding:8px;border-radius:8px;border:1px solid #ddd;font-size:16px;text-align:right;cursor:pointer; background-color: #f9f9f9;}
        
        .form-group{margin-bottom: 10px; text-align: right;} 
        .form-group label{display: block; margin-bottom: 2px; font-weight: 600; color: #333; font-size: 14px;}
        .form-group input, .form-group textarea{width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 8px; box-sizing: border-box; font-size: 16px; background-color: #f9f9f9; min-height: 38px;}
        .form-group textarea { resize: vertical; min-height: 60px; }
        
        .price-container {
            text-align: center;
            padding: 5px;
            margin-top: 5px !important;
        }
        .old-price {
            text-decoration: line-through;
            color: #999;
            font-size: 14px;
            margin-left: 10px;
            display: none;
        }
        .old-price.show { display: inline-block; }

        /* Payment Modal Specific Styling */
        #paymentModalTitle {
            font-size: 24px;
            font-weight: 800;
            margin-bottom: 5px;
        }
        #paymentModal .modal-content {
            background: linear-gradient(135deg, var(--soft-white), #f0fff0); 
            max-width: 380px;
            padding: 25px;
            text-align: center; 
        }
        #paymentModal p {
            text-align: center;
            font-size: 15px;
            color: #555;
            margin: 10px 0;
        }
        #paymentModal p strong {
            display: block;
            font-size: 24px;
            color: var(--accent);
            margin-top: 5px;
        }
        #paymentTotalAmount {
            font-size: 28px !important;
            font-weight: 800;
            color: #E91E63; 
            display: inline;
            direction: ltr;
        }
        #openBitApp {
            background-color: #4CAF50; 
            transition: all 0.3s;
            padding: 12px 20px;
            font-size: 18px;
            margin-top: 10px;
        }
        #openBitApp:hover {
            background-color: #388E3C;
        }

        /* NEW: Flex group for total and copies */
        .total-copies-group {
             display: flex;
             justify-content: space-around;
             align-items: center;
             margin-bottom: 15px;
             gap: 15px;
        }
        .total-copies-group .form-group {
             flex: 1;
             margin-bottom: 0;
        }
        .total-copies-group .price-display {
             flex-shrink: 0;
             text-align: center;
        }


        /* --- Sidebar Styles (UPDATED TO FLOATING/FIXED TOGGLE) --- */
        #sidebar-toggle {
            /* FIXED: Floating Styles */
            position: fixed; 
            top: 20px;
            right: 20px; /* FIXED: Positioned to the right */
            left: auto; /* Ensure left is not set */
            
            background: var(--accent);
            color: #fff;
            border: none;
            padding: 10px 15px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            z-index: 100; 
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }
        .sidebar {
            position: fixed;
            top: 0;
            right: -270px; 
            width: var(--sidebar-width);
            height: 100%;
            background: var(--soft-white);
            box-shadow: none;
            transition: right 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
            z-index: 150; 
            padding: 25px 20px;
            box-sizing: border-box;
            overflow-y: auto;
            text-align: right;
        }
        .sidebar.open {
            right: 0; 
            box-shadow: -4px 0 15px rgba(0,0,0,0.15); 
        }
        .close-sidebar {
            background: none;
            border: none;
            font-size: 35px;
            position: absolute;
            left: 10px;
            top: 5px;
            cursor: pointer;
            color: var(--accent);
            line-height: 1;
            font-weight: 300;
        }
        .sidebar h3 {
            color: var(--accent);
            border-bottom: 2px solid #eee;
            padding-bottom: 10px;
            margin-top: 0;
        }
        .sidebar ul {
            list-style: none;
            padding: 0;
        }
        .sidebar li {
            margin-bottom: 10px;
        }
        .sidebar a {
            color: var(--text);
            text-decoration: none;
            display: block;
            padding: 8px 0;
            transition: color 0.2s;
            font-weight: 500;
        }
        .sidebar a:hover {
            color: #00897B; 
            padding-right: 5px;
        }
        
        /* Overlay for Sidebar */
        .overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 120; 
            cursor: pointer;
        }
        .overlay.show {
            display: block;
        }

        /* Responsive */
        @media (max-width:900px){
            .card{
                /* No longer a flex row layout for two main elements */
                display: block;
            }
            /* Increased height for mobile */
            .carousel-wrap{
                /* Now full width, no need for min/max width overrides */
                width:100%;
                max-width:1100px;
                min-width:0;
                height:350px;
                margin-bottom: 20px; /* Reduced margin for mobile */
            }
            /* ADJUSTED: Content padding reset for mobile */
            .content{padding:18px;}
            
            .logo-header-wrapper {
                 /* Removed top: 5px; */
                 margin-bottom: 15px;
            }
            .logo-container { 
                width: 120px; /* ADJUSTED: Smaller for tablet/mobile */
                height: 120px;
            }
            
            /* ADJUSTED: Sidebar toggle position (fixed but adjusted for mobile view) */
            #sidebar-toggle {
                right: 15px; /* FIXED: Adjusting fixed position for mobile */
                left: auto; /* Ensure left is auto */
                top: 15px;
                margin: 0;
                padding: 8px 12px;
                font-size: 14px;
                z-index: 1000;
            }
            
            /* Padding for app on small screens so the logo doesn't cover the main content */
            .app {
                padding-top: 24px; /* No need for large padding-top anymore */
            }
            
            /* Modal adjustments for smaller devices */
            .modal-content {
                padding: 15px;
                width: 95%; /* Ensures it doesn't touch edges */
            }
            .form-group { margin-bottom: 8px; }
            .modal h2 { font-size: 20px; margin-bottom: 5px; }
            hr { margin: 10px 0 !important; }
        }
        
        /* Mobile Specific (further refinements) */
        @media (max-width: 550px) {
            
            .logo-container { 
                width: 100px; /* ADJUSTED: Smaller for very small screens */
                height: 100px;
            }
            
            #sidebar-toggle {
                padding: 8px 12px;
                font-size: 14px;
            }
            .sidebar {
                --sidebar-width: 220px; 
                right: -240px; 
            }
            .sidebar.open {
                right: 0; 
            }
            
            .app {
                padding-top: 24px; /* No need for large padding-top anymore */
            }
        }

    </style>
</head>
<body>
    <div class="overlay" id="sidebar-overlay"></div>
    <div class="sidebar" id="sidebar">
        <button class="close-sidebar" id="close-sidebar-btn">Ã—</button> 
        <h3>×ª×•×›×Ÿ ×¢× ×™×™× ×™× âœ¨</h3>
        <ul>
            <li><a href="#product-description">××•×“×•×ª ×”××•×¦×¨</a></li>
            <li><a href="#benefits">×™×ª×¨×•× ×•×ª ×”×¡×‘×•×Ÿ</a></li>
            <li><a href="#about-coral">×”×¡×™×¤×•×¨ ×©×œ× ×•</a></li>
            <li><a href="#product-variations">ğŸŒ± ×”××•×¦×¨×™× ×©×œ× ×•</a></li>
            <li><a href="#order-form">×”×–×× ×” ×•×ª×©×œ×•×</a></li>
        </ul>
        <p style="margin-top: 30px; font-size: 14px; color: #666;">
            ×œ×›×œ ×©××œ×” × ×•×¡×¤×ª, × ×™×ª×Ÿ ×œ×™×¦×•×¨ ×§×©×¨.
            <br>
            **×§×•×¨×œ: 050-8463242**
        </p>
    </div>

    <div class="app">
        
        <div class="logo-header-wrapper">
            <span class="logo-container">K</span> 
        </div>
        
        <button id="sidebar-toggle">×ª×¤×¨×™×˜ â˜°</button>
        
        <div class="carousel-wrap" aria-roledescription="carousel">
            <div class="slides-container">
                <div class="slides" id="slides">
                    <div class="slide"><img alt="×¡×‘×•×Ÿ ××—×œ×‘ ×× ×˜×‘×¢×™ - ×ª××•× ×” 1" src="https://i.imgur.com/m2nDchP.jpeg"/></div>
                    <div class="slide"><img alt="×¡×‘×•×Ÿ ××—×œ×‘ ×× ×˜×‘×¢×™ - ×ª××•× ×” 2" src="https://i.imgur.com/t8Y1Jrc.jpeg"/></div>
                    <div class="slide"><img alt="×¡×‘×•×Ÿ ××—×œ×‘ ×× ×˜×‘×¢×™ - ×ª××•× ×” 3" src="https://i.imgur.com/xGCiRsO.jpeg"/></div>
                </div>
            </div>
        </div>
        <div class="card" role="application">
            
            <div class="content">

                <h1>×¡×‘×•×Ÿ ×˜×‘×¢×™ ××—×œ×‘ ××</h1>
                <p class="lead" style="color: #444; font-size: 18px; text-align: center;">
                    **×˜×‘×¢×™. ××™×©×™. ××•×©×œ×**
                </p>

                <p class="lead" id="product-description">
                    ×”×¢× ×™×§×™ ×œ×ª×™× ×•×§×š ××ª× ×” ××¤× ×§×ª ×•××–×™× ×” â€“ ××œ-×¡×‘×•×Ÿ ×™×™×—×•×“×™ ×•×˜×‘×¢×™ ×”×¢×©×•×™ **××—×œ×‘ ×”×× ×©×œ×š**. ×”×–× ×” ×™×©×™×¨×” ×“×¨×š ×”×¢×•×¨.
                </p>

                <div class="natural-text">
                    ×”×¡×‘×•×Ÿ ××©×œ×‘ ××ª ×—×œ×‘ ×”×× ×¢× **×©×× ×™× ×˜×‘×¢×™×™× × ×•×¡×¤×™×**, ×•× ×•×¢×“ ×œ×”×§×œ ×¢×œ ×ª×¡××™× ×™ ×™×•×‘×©, ×’×™×¨×•×™, ××“××•××™×•×ª ×•×ª×¡××™× ×™ ××¡×ª××” ×©×œ ×”×¢×•×¨. 
                </div>

                <h2 id="benefits">ğŸŒ¿ ×™×ª×¨×•× ×•×ª ×”×¡×‘×•×Ÿ ×”×˜×‘×¢×™</h2>
                <ul class="feature-list">
                    <li><span class="feature-icon">âœ”ï¸</span> **××’×™×œ ×œ×™×“×”:** ××ª××™× ×œ×¢×•×¨ ×”×¨×’×™×© ×‘×™×•×ª×¨.</li>
                    <li><span class="feature-icon">âœ¨</span> **×”×§×œ×” ××™×™×“×™×ª:** ××ª××™× ×œ×¢×•×¨ ×¨×’×™×© ×•×œ×ª×™× ×•×§×•×ª ×©×¡×•×‘×œ×™× ×"×§×œ×™×¤×”" (×§×©×§×©×ª) ×‘×¨××©.</li>
                    <li><span class="feature-icon">ğŸŒ±</span> **×¨×›×™×‘×™× ×˜×‘×¢×™×™× ×‘×œ×‘×“:** ×œ×œ× SLS, ×¤×¨××‘× ×™×, ×—×•××¨×™ ×¨×™×— ×¡×™× ×˜×˜×™×™× ××• ×›×™××™×§×œ×™× ×§×©×™×.</li>
                    <li><span class="feature-icon">ğŸ‘</span> **×™×™×¦×•×¨ ×‘×©×™×˜×” ×§×¨×”:** ××™×•×¦×¨ ×‘×¢×‘×•×“×ª ×™×“, ×ª×•×š ×©××™×¨×” ××§×¡×™××œ×™×ª ×¢×œ ×”×¨×›×™×‘×™× ×”×¤×¢×™×œ×™× ×•×”××™× ×¨×œ×™× ×©×‘×—×œ×‘ ×”××.</li>
                </ul>

                <h2 id="about-coral">ğŸ’– ×§×¦×ª ×¢×œ×™×™ ×•×¢×œ ×¡×’×•×œ×•×ª ×—×œ×‘ ×”××</h2>
                <p>
                    × ×¢×™× ×œ×”×›×™×¨, ×©××™ ×§×•×¨×œ, ×¢×•×¨×›×ª-×“×™×Ÿ ×•××™×× ×œ×©× ×™ ×‘× ×™× ××§×¡×™××™×. ×”×¨×¢×™×•×Ÿ ×œ×™×™×¦×¨ ××œ-×¡×‘×•×Ÿ ××—×œ×‘ ×× × ×•×œ×“ ××ª×•×š **× ×™×¡×™×•× ×™ ×”××™×©×™** ×¢× ×‘× ×™ ×”×‘×›×•×¨ ×©×¡×‘×œ ××ª×¡××™× ×™× ×§×©×™× ×©×œ ××¡×ª××” ×©×œ ×”×¢×•×¨.
                </p>
                <p>
                    ×œ××—×¨ ×©× ×™×¡×™×ª×™ ××™× ×¡×¤×•×¨ ×ª×›×©×™×¨×™× ×™×§×¨×™× ×œ×œ× ×”×¦×œ×—×”, × ×—×©×¤×ª×™ ×œ×¡×’×•×œ×•×ª ×”××“×™×¨×•×ª ×©×œ ×—×œ×‘ ×× ×›×ª×¨×›×•×‘×ª ××–×™× ×”, ××œ××ª ×œ×—×•×ª ×•× ×•×’×“× ×™×. ×××– ×©×”×ª×—×œ×ª×™ ×œ×¨×§×•×— ×¡×‘×•× ×™ ×—×œ×‘ ××, ×¢×•×¨×• ×©×œ ×‘× ×™ ×”×©×ª×¤×¨ ×¤×œ××™×. ×”×¨×’×©×ª×™ ×©×× ×™ **×—×™×™×‘×ª ×œ×—×œ×•×§ ××ª ×”×¤×œ× ×”×–×” ×’× ×¢× ××™××”×•×ª ××—×¨×•×ª**.
                </p>
                
                <h2 id="product-variations">ğŸŒ± ×”××•×¦×¨×™× ×©×œ× ×•:</h2>
                
                <p style="font-size: 16px; font-weight: 600; color: var(--accent); margin-bottom: 15px; border-right: 3px solid var(--accent); padding-right: 10px;">
                    × ×™×ª×Ÿ ×œ×‘×§×© ××ª×›×•×Ÿ ××•×ª×× ××™×©×™×ª, ×œ×¤×™ ×”× ×ª×•× ×™× ×”××™×©×™×™× ×©×œ ×¢×•×¨ ×”×ª×™× ×•×§ ×©×œ×š.
                </p>

                <div class="product-list" style="display: flex; flex-direction: column; gap: 20px;">
                    
                    <div class="product-item">
                        <h3>1. ××’×¢ ××–×™×Ÿ</h3>
                        <p style="font-weight: 600;">×ª×›×©×™×¨ ×œ×—×•×ª ×©××¢× ×™×§ ×œ×—×•×ª ×¢××•×§×” ×œ×¢×•×¨ ×™×‘×©, ×›××• ×—×™×‘×•×§ ××—×× ×©×œ ××™××.</p>
                        <p style="font-size: 14px; color: #555;">××œ-×¡×‘×•×Ÿ ×’×•×£ ×¢×“×™×Ÿ ×•××¢×•×¨×¨ ×œ×—×•×ª ×œ×¢×•×¨ ×™×‘×©. ××›×™×œ ×—×××ª ×©×™××” ×•×©××Ÿ ×©×§×“×™×.</p>
                    </div>

                    <div class="product-item">
                        <h3>2. ××’×¢ ××ª×•×§</h3>
                        <p style="font-weight: 600;">×ª×›×©×™×¨ ×œ×—×•×ª ××¤× ×§ ×¢× ×¨×™×— ×˜×‘×¢×™ ×¢×“×™×Ÿ, ×›××• × ×©×™×§×” ××•×”×‘×ª ×©×œ ××™××.</p>
                        <p style="font-size: 14px; color: #555;">××œ-×¡×‘×•×Ÿ ××¤× ×§ ×¢× ×¨×™×— ×˜×‘×¢×™ ×¢×“×™×Ÿ ×©×œ ×§×§××•. ××›×™×œ ×—×××ª ×§×§××• ×•×©××Ÿ ×–×™×ª.</p>
                    </div>

                    <div class="product-item">
                        <h3>3. ××’×¢ ×˜×”×•×¨</h3>
                        <p style="font-weight: 600;">×ª×›×©×™×¨ ×œ×—×•×ª ×¢×“×™×Ÿ ×œ× ×™×§×•×™ ×¢×•×¨ ×¨×’×™×©, ×›××• ××’×¢ × ×§×™ ×•×˜×”×•×¨ ×©×œ ××™××.</p>
                        <p style="font-size: 14px; color: #555;">××œ-×¡×‘×•×Ÿ ×¤× ×™× ×¢×“×™×Ÿ ×œ× ×™×§×•×™ ×¢×•×¨ ×¨×’×™×©. ××›×™×œ ×—×™××¨ ×œ×‘×Ÿ ×•×©××Ÿ ×—×•×—×•×‘×”.</p>
                    </div>

                    <div class="product-item">
                        <h3>4. ××’×¢ ×¤×•×¨×—</h3>
                        <p style="font-weight: 600;">×ª×›×©×™×¨ ×œ×—×•×ª ××¨×’×™×¢ ×œ×¢×•×¨ ××“××•××™, ×›××• ×œ×™×˜×•×£ ××™××”×™ ×¢×“×™×Ÿ.</p>
                        <p style="font-size: 14px; color: #555;">××œ-×¡×‘×•×Ÿ ×’×•×£ ××¨×’×™×¢ ×œ×¢×•×¨ ××“××•××™ ××• ××’×•×¨×”. ××›×™×œ ×©××Ÿ ×§×œ× ×“×•×œ×” ××•×¨×’× ×™ ×•×©×™×‘×•×œ×ª ×©×•×¢×œ.</p>
                    </div>

                    <div class="product-item">
                        <h3>5. ××’×¢ ××•×”×‘</h3>
                        <p style="font-weight: 600;">×ª×›×©×™×¨ ×œ×—×•×ª ×¢×“×™×Ÿ ×œ× ×™×§×•×™ ×¢×•×¨ ×•×©×™×¢×¨, ×›××• ××”×‘×ª ×× ×©××™× ×” × ×’××¨×ª.</p>
                        <p style="font-size: 14px; color: #555;">××œ-×¡×‘×•×Ÿ ×¢×“×™×Ÿ ×œ× ×™×§×•×™ ×”×©×™×¢×¨ ×•×”×§×¨×§×¤×ª. ××›×™×œ ×©××Ÿ ×§×™×§ ×•×©××Ÿ ×–×¨×¢×™ ×¢× ×‘×™×.</p>
                    </div>

                    <div class="product-item">
                        <h3>6. ××’×¢ ×—××™×</h3>
                        <p style="font-weight: 600;">×ª×›×©×™×¨ ×œ×—×•×ª ××–×™×Ÿ ×œ×¢×•×¨ ×™×‘×©, ×›××• ×ª×—×•×©×ª ×—××™××•×ª ×©×œ ×‘×™×ª ×•××™××.</p>
                        <p style="font-size: 14px; color: #555;">××œ-×¡×‘×•×Ÿ ××–×™×Ÿ ×œ×¢×•×¨ ×™×‘×© ×‘××™×•×—×“. ××›×™×œ ×©××Ÿ ×©×•××©×•×.</p>
                    </div>
                    
                    <div class="product-item">
                        <h3>7. ××’×¢ ××’×•× ×Ÿ</h3>
                        <p style="font-weight: 600;">×ª×›×©×™×¨ ×œ×—×•×ª ×œ×¢×•×¨ ×¨×’×™×© ×•×¢×“×™×Ÿ, ×›××• ×™×“ ××™××”×™×ª ××’×•× × ×ª.</p>
                        <p style="font-size: 14px; color: #555;">××œ-×¡×‘×•×Ÿ ×˜×™×¤×•×œ×™ ×œ×¢×•×¨ ×¨×’×™×©, ××ª××™× ×‘××™×•×—×“ ×œ×ª×™× ×•×§×•×ª ×¢× × ×˜×™×™×” ×œ××“××•××™×•×ª. ××›×™×œ ×©××Ÿ ××•×‘×œ×™×¤×™×—×” ××•×¨×’× ×™.</p>
                    </div>

                </div>

                <h3 style="margin-top: 30px; border-bottom: 2px solid #eee; padding-bottom: 5px; color: var(--accent);">âš ï¸ ×”× ×—×™×•×ª ×›×œ×œ×™×•×ª</h3>
                
                <p style="font-size: 14px; color: #555; margin-bottom: 5px;">
                    **××™×š ×–×” ×¢×•×‘×“?** × ×™×ª×Ÿ ×œ×”×‘×™× ××ª ×—×œ×‘ ×”×× ×”××™×©×™ ×©×œ×š ×œ××¡×¤×¨ × ×§×•×“×•×ª ××™×¡×•×£, ××• ×œ×”×©×ª××© ×‘×—×œ×‘ ×× ×©×œ ×ª×•×¨××ª. ×›××•×ª ×”×—×œ×‘ ×”×“×¨×•×©×” ×”×™× **40 ×"×œ ×œ×™×—×™×“×”**. 
                </p>
                
                <ul style="list-style-type: 'â€¢ '; padding-right: 20px; font-size: 14px; color: #555; margin-top: 10px;">
                    <li>×”×¡×‘×•×Ÿ ××™× ×• ×ª×¨×•×¤×” ×•××™× ×• ×¨××•×™ ×œ×××›×œ.</li>
                    <li>××™×Ÿ ×œ×‘×œ×•×¢, ×™×© ×œ×”×¤×¡×™×§ ××ª ×”×©×™××•×© ×‘××§×¨×” ×©×œ ×’×™×¨×•×™.</li>
                    <li>×”×™×•×ª ×©××“×•×‘×¨ ×‘××œ-×¡×‘×•×Ÿ ×¢×‘×•×“×ª ×™×“, ×”×¨×™ ×©×”×’×•×“×œ, ×”×¦×‘×¢, ×”××¨×§× ×•×”××©×§×œ ×¢×©×•×™×™× ×œ×”×©×ª× ×•×ª.</li>
                    <li style="font-weight: 700; color: var(--error);">**×ª×•×§×£ ×”×¡×‘×•×Ÿ: ×—×•×“×©×™×™×. ×™×© ×œ×©××•×¨ ×‘×§×™×¨×•×¨.**</li>
                </ul>

                <h2 id="order-form">ğŸ ×”×–×× ×” ×•×ª×©×œ×•×</h2>
                
                <div class="cta" style="margin-top: 30px;">
                    <button class="btn" id="openOrderModalBtn" style="width: 100%;">×œ×”×–×× ×” ×•×œ××¢×‘×¨ ×œ×ª×©×œ×•× ğŸ›’</button>
                </div>
                
            </div>
            
            </div>
    </div>

    <div class="modal" id="shippingModal">
        <div class="modal-content">
            <h2>×¤×¨×˜×™ ×”×–×× ×” ğŸ“</h2>
            
            <h3>×‘×—×™×¨×ª ××•×¦×¨ ×•×¢×™×¦×•×‘ ğŸ§¼</h3>
            
            <div class="form-group">
                <label for="copies">×›××•×ª ×¡×‘×•× ×™×:</label>
                <div class="total-copies-group">
                    <select id="copies">
                        <option value="1">1 ×™×—' (â‚ª45)</option>
                        <option value="2">2 ×™×—' (â‚ª90)</option>
                        <option value="4">4 ×™×—' (â‚ª180)</option>
                        <option value="6">6 ×™×—' (â‚ª270)</option>
                        <option value="10">10 ×™×—' (â‚ª450)</option>
                    </select>
                </div>
            </div>

            <div class="form-group">
                <label for="recipe">×©× ×”××ª×›×•×Ÿ / ××’×¢:</label>
                <select id="recipe" required>
                    <option value="" disabled selected>×‘×—×¨ ××ª×›×•×Ÿ (××’×¢ ××–×™×Ÿ, ××ª×•×§, ×˜×”×•×¨...)</option>
                    <option value="××’×¢ ××–×™×Ÿ">××’×¢ ××–×™×Ÿ (×¢×•×¨ ×™×‘×©)</option>
                    <option value="××’×¢ ××ª×•×§">××’×¢ ××ª×•×§ (×¨×™×— ×§×§××• ×¢×“×™×Ÿ)</option>
                    <option value="××’×¢ ×˜×”×•×¨">××’×¢ ×˜×”×•×¨ (× ×™×§×•×™ ×¤× ×™×)</option>
                    <option value="××’×¢ ×¤×•×¨×—">××’×¢ ×¤×•×¨×— (×¢×•×¨ ××“××•××™)</option>
                    <option value="××’×¢ ××•×”×‘">××’×¢ ××•×”×‘ (×©×™×¢×¨ ×•×§×¨×§×¤×ª)</option>
                    <option value="××’×¢ ×—××™×">××’×¢ ×—××™× (×¢×•×¨ ×™×‘×© ×‘××™×•×—×“)</option>
                    <option value="××’×¢ ××’×•× ×Ÿ">××’×¢ ××’×•× ×Ÿ (×¢×•×¨ ×¨×’×™×© / ××“××•××™×•×ª)</option>
                    <option value="××—×¨">××—×¨ (×™×© ×œ×¦×™×™×Ÿ ×‘×”×ª×××” ××™×©×™×ª)</option>
                </select>
            </div>

            <div class="form-group">
                <label for="shape">×¦×•×¨×”:</label>
                <select id="shape" required>
                    <option value="" disabled selected>×‘×—×¨ ×¦×•×¨×”</option>
                    <option value="××œ×‘× ×™×ª">××œ×‘× ×™×ª (×¨×’×™×œ)</option>
                    <option value="×©×•×©× ×”">×©×•×©× ×”</option>
                    <option value="×œ×‘ (2 ×™×—' ×‘×××¨×–)">×œ×‘ (2 ×™×—' ×‘×××¨×– - ×—×•×‘×” ×œ×‘×—×•×¨ ×›××•×ª ×–×•×’×™×ª)</option>
                </select>
            </div>

            <div class="form-group">
                <label for="essentialOil">×©××Ÿ ××ª×¨×™:</label>
                <select id="essentialOil">
                    <option value="×œ×œ×">×œ×œ×</option>
                    <option value="×œ×‘× ×“×¨">×œ×‘× ×“×¨</option>
                    <option value="×§××•××™×œ">×§××•××™×œ</option>
                    <option value="×¢×¥ ×”×ª×”">×¢×¥ ×”×ª×”</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="blessing">×”×•×¡×¤×ª ×‘×¨×›×” (×˜×§×¡×˜ ×¢×“ 50 ××•×ª×™×•×ª - ××•×¤×¦×™×•× ×œ×™):</label>
                <textarea id="blessing" maxlength="50" placeholder="×œ×“×•×’××”: ×œ×™×œ×“ ×”××ª×•×§ ×©×œ× ×•, ×‘××”×‘×” ×’×“×•×œ×”."></textarea>
            </div>
            
            <div class="price-container">
                <div class="price" id="totalPrice" style="font-size: 24px;">â‚ª45</div>
                <span class="old-price" id="oldPrice"></span>
            </div>

            <div class="coupon-section">
                <div class="coupon-input-group">
                    <input type="text" id="couponCode" placeholder="×§×•×“ ×§×•×¤×•×Ÿ">
                    <button type="button" class="btn-apply" id="applyCouponBtn">×”×—×œ</button>
                </div>
                <div class="coupon-msg" id="couponMsg"></div>
            </div>
            
            <hr style="border: 0; border-top: 1px dashed #eee; margin: 15px 0;">

            <h3>×¤×¨×˜×™ ××©×œ×•×—</h3>
            <div class="form-group"><label for="shippingName">×©× ××œ×</label><input type="text" id="shippingName" required placeholder="×©× ×•×©× ××©×¤×—×”"></div>
            <div class="form-group"><label for="shippingPhone">×˜×œ×¤×•×Ÿ</label><input type="tel" id="shippingPhone" required placeholder="05X-XXXXXXX"></div>
            <div class="form-group"><label for="shippingEmail">×“×•×"×œ</label><input type="email" id="shippingEmail" required placeholder="example@mail.com"></div>
            <div class="form-group"><label for="shippingCity">×¢×™×¨</label><input type="text" id="shippingCity" required placeholder="×œ×“×•×’××”: ×ª×œ ××‘×™×‘"></div>
            <div class="form-group"><label for="shippingAddress">×›×ª×•×‘×ª</label><input type="text" id="shippingAddress" required placeholder="×¨×—×•×‘, ××¡×¤×¨ ×‘×™×ª, ×“×™×¨×”"></div>
            
            <h3>×¤×¨×˜×™ ×”×ª×××” ××™×©×™×ª</h3>
            <div class="form-group"><label for="babyAge">×’×™×œ ×”×ª×™× ×•×§ (×—×•×“×©×™×)</label><input type="number" id="babyAge" required placeholder="×œ×“×•×’××”: 3" min="0" max="48"></div>
            <div class="form-group"><label for="allergies">××œ×¨×’×™×•×ª / ×—×œ×‘ ×©×œ ×ª×•×¨××ª (××•×¤×¦×™×•× ×œ×™)</label><textarea id="allergies" placeholder="×¦×™×™×Ÿ ××œ×¨×’×™×•×ª ×™×“×•×¢×•×ª ××• ×× ××“×•×‘×¨ ×‘×—×œ×‘ ×©×œ ×ª×•×¨××ª"></textarea></div>

            <div class="modal-buttons">
                <button class="btn" id="continueToPaymentBtn" style="flex-grow: 1;">×”××©×š ×œ×ª×©×œ×•×</button>
                <button class="btn close-modal" data-modal="shippingModal" style="background: #999; flex-grow: 1;">×‘×™×˜×•×œ</button>
            </div>
        </div>
    </div>
    
    <div class="modal" id="paymentModal">
        <div class="modal-content">
            <h2 id="paymentModalTitle">×©×œ×‘ ×”×ª×©×œ×•× âœ…</h2>
            <p>
                **×¡×›×•× ×¡×•×¤×™ ×œ×ª×©×œ×•×: <span id="paymentTotalAmount">â‚ª45</span>**
            </p>
            <hr style="border: 0; border-top: 1px solid #ddd; margin: 15px 0;">
            <p style="font-size: 14px;">
                ×œ×—×™×¦×” ×¢×œ ×”×›×¤×ª×•×¨ ×ª×©×œ×— ××œ×™× ×• ××ª ×¤×¨×˜×™ ×”×”×–×× ×” ×©×œ×š ×•×ª×¢×‘×™×¨ ××•×ª×š ×œ×ª×©×œ×•× ×××•×‘×˜×— ×‘×××¦×¢×•×ª ××¤×œ×™×§×¦×™×™×ª Bit.
            </p>
            <div class="modal-buttons" style="flex-direction: column; width: 100%;">
                <button class="btn" id="openBitApp" style="width: 100%;">××¢×‘×¨ ×œ×ª×©×œ×•× (Bit)</button>
                <button class="btn close-modal" data-modal="paymentModal" style="background: #999; width: 100%; margin-top: 5px;">×—×–×¨×” ×œ×¤×¨×˜×™ ××©×œ×•×—</button>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
    
    <script>
        // Initialize EmailJS (REPLACE WITH YOUR KEYS)
        // **IMPORTANT:** Replace 'service_cprtttd' and 'template_m39ushb' with your actual service/template IDs
        emailjs.init('ecHybfD_vT68aQGnO'); 

        const PRICE_PER_BOOK = 45; // Changed from BOOK to SOAP but kept the variable name for minimal changes
        
        const COUPONS = {
            'TALYA20': 0.20, // 20% discount
            'MAMA10': 0.10, Â // 10% discount
            'YOLADET': 0.15 // 15% discount
        };
        let isDiscountApplied = false;
        let discountRate = 0; 

        // Elements
        const copiesInput = document.getElementById('copies');
        const totalPriceEl = document.getElementById('totalPrice');
        const oldPriceEl = document.getElementById('oldPrice'); 
        
        const openOrderModalBtn = document.getElementById('openOrderModalBtn'); 

        const shippingModal = document.getElementById('shippingModal');
        const continueToPaymentBtn = document.getElementById('continueToPaymentBtn');
        const paymentModal = document.getElementById('paymentModal');
        const paymentTotalAmount = document.getElementById('paymentTotalAmount');
        const openBitApp = document.getElementById('openBitApp'); 

        const couponInput = document.getElementById('couponCode');
        const applyCouponBtn = document.getElementById('applyCouponBtn');
        const couponMsg = document.getElementById('couponMsg');

        // NEW ORDER FIELDS
        const recipeInput = document.getElementById('recipe');
        const shapeInput = document.getElementById('shape');
        const essentialOilInput = document.getElementById('essentialOil');
        const blessingInput = document.getElementById('blessing');

        // Sidebar Elements
        const sidebar = document.getElementById('sidebar');
        const sidebarToggle = document.getElementById('sidebar-toggle');
        const closeSidebarBtn = document.getElementById('close-sidebar-btn');
        const sidebarOverlay = document.getElementById('sidebar-overlay');

        let currentOrderData = {};

        function updateTotal() {
            const quantity = parseInt(copiesInput.value) || 1;
            let total = PRICE_PER_BOOK * quantity;
            let finalTotal = total;
            
            if (isDiscountApplied) {
                finalTotal = total * (1 - discountRate);
                finalTotal = Math.round(finalTotal); // Round to nearest Shekel
                
                oldPriceEl.textContent = `â‚ª${total}`;
                oldPriceEl.classList.add('show');
            } else {
                oldPriceEl.classList.remove('show');
            }

            totalPriceEl.textContent = `â‚ª${finalTotal}`;
            paymentTotalAmount.textContent = `â‚ª${finalTotal}`; 
        }

        function applyCoupon() {
            const inputCode = couponInput.value.trim().toUpperCase();
            
            if (COUPONS.hasOwnProperty(inputCode)) {
                if (!isDiscountApplied) {
                    isDiscountApplied = true;
                    discountRate = COUPONS[inputCode]; 
                    const discountPercent = discountRate * 100;

                    couponMsg.textContent = `×”×§×•×¤×•×Ÿ ×”×•×¤×¢×œ! (${discountPercent}% ×”× ×—×”)`;
                    couponMsg.className = "coupon-msg success";
                    
                    couponInput.disabled = true; 
                    applyCouponBtn.disabled = true;
                    applyCouponBtn.textContent = "V";
                    updateTotal();
                }
            } else if (inputCode === "") {
                couponMsg.textContent = "×”×–×Ÿ ×§×•×“";
                couponMsg.className = "coupon-msg error";
            } else {
                couponMsg.textContent = "×§×•×“ ×©×’×•×™";
                couponMsg.className = "coupon-msg error";
            }
        }


        function closeModal(modalElement) {
            modalElement.classList.remove('show');
        }

        // --- Sidebar Logic ---
        function toggleSidebar() {
            sidebar.classList.toggle('open');
            sidebarOverlay.classList.toggle('show');
        }

        sidebarToggle.addEventListener('click', toggleSidebar);
        closeSidebarBtn.addEventListener('click', toggleSidebar);
        sidebarOverlay.addEventListener('click', toggleSidebar);
        
        document.querySelectorAll('.sidebar a').forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const targetId = link.getAttribute('href');
                const targetElement = document.querySelector(targetId);
                if (targetElement) {
                    targetElement.scrollIntoView({ behavior: 'smooth' });
                    // Close sidebar after click
                    if (sidebar.classList.contains('open')) {
                         toggleSidebar();
                    }
                }
            });
        });

        // --- Email Sending Logic ---
        function sendOrderEmail() {
            if (Object.keys(currentOrderData).length === 0) {
                return;
            }
            
            // Format the product details nicely
            const productDetails = `
                ×›××•×ª: ${currentOrderData.copies} ×™×—'
                ××ª×›×•×Ÿ: ${currentOrderData.recipe}
                ×¦×•×¨×”: ${currentOrderData.shape}
                ×©××Ÿ ××ª×¨×™: ${currentOrderData.essentialOil}
                ×‘×¨×›×”: ${currentOrderData.blessing || '×œ×œ×'}
                ×’×™×œ ×”×ª×™× ×•×§: ${currentOrderData.babyAge} ×—×•×“×©×™×
                ××œ×¨×’×™×•×ª/×”×¢×¨×•×ª: ${currentOrderData.allergies || '×œ×œ×'}
            `.trim();


            emailjs.send('service_cprtttd', 'template_m39ushb', {
                to_email: 'c203240130@gmail.com', // **REPLACE WITH THE REAL EMAIL**
                name: currentOrderData.name,
                phone: currentOrderData.phone,
                email: currentOrderData.email,
                city: currentOrderData.city,
                address: currentOrderData.address,
                product_details: productDetails, // Pass the formatted product details
                total: currentOrderData.totalPrice,
                product_name: "×¡×‘×•×Ÿ ×˜×‘×¢×™ ××—×œ×‘ ××" 
            })
            .then(function(response) {
                console.log('Order Email Sent SUCCESSFULLY');
            }, function(error) {
                console.warn('Order Email FAILED to send', error);
            });
        }
        // --- End Email Sending Logic ---


        openOrderModalBtn.addEventListener('click', ()=>{ 
            updateTotal();
            shippingModal.classList.add('show'); 
        });

        copiesInput.addEventListener('change', updateTotal);
        applyCouponBtn.addEventListener('click', applyCoupon);
        couponInput.addEventListener('keypress', function (e) {
            if (e.key === 'Enter') {
                e.preventDefault(); 
                applyCoupon();
            }
        });
        
        updateTotal(); 


        // --- CAROUSEL LOGIC (RTL FIXED) ---
        (function(){
            const slidesEl = document.getElementById('slides');
            const slides = Array.from(slidesEl.children);
            if (slides.length <= 1) return;
            let index = 0;
            const intervalMs = 3000; // Time per slide
            let timer = null;
            
            function update(){
                // Calculate the translation distance: index * (100% / number of slides)
                const slideWidth = 100 / slides.length; 
                
                // For RTL display, we use a POSITIVE translateX value
                slidesEl.style.transform = `translateX(${index * slideWidth}%)`;
            }

            function nextSlide(){ 
                index = (index + 1) % slides.length; 
                update(); 
            }
            
            function startTimer(){ 
                if(timer) clearInterval(timer); 
                timer = setInterval(nextSlide, intervalMs); 
            }
            
            startTimer();

            // Pause timer on hover
            const carouselWrap = document.querySelector('.carousel-wrap');
            carouselWrap.addEventListener('mouseenter', ()=>{ if(timer) clearInterval(timer); });
            carouselWrap.addEventListener('mouseleave', ()=>{ startTimer(); });

            update();
        })();
        // --- END CAROUSEL LOGIC ---

        continueToPaymentBtn.addEventListener('click', (e)=>{
            const name = document.getElementById('shippingName').value.trim();
            const phone = document.getElementById('shippingPhone').value.trim();
            const email = document.getElementById('shippingEmail').value.trim();
            const city = document.getElementById('shippingCity').value.trim();
            const address = document.getElementById('shippingAddress').value.trim();
            const babyAge = document.getElementById('babyAge').value.trim();
            const allergies = document.getElementById('allergies').value.trim();
            
            // NEW FIELDS VALIDATION
            const recipe = recipeInput.value;
            const shape = shapeInput.value;

            // Simple validation for new fields
            if (!recipe) {
                alert('×× × ×‘×—×¨×• ××ª×›×•×Ÿ/××’×¢.');
                return;
            }
            if (!shape) {
                alert('×× × ×‘×—×¨×• ×¦×•×¨×” ×¨×¦×•×™×”.');
                return;
            }
            if (shape.includes('×œ×‘') && (copiesInput.value % 2 !== 0)) {
                 alert('×©×™××• ×œ×‘: ×¦×•×¨×ª "×œ×‘" ××’×™×¢×” 2 ×™×—\' ×‘×××¨×–. ×× × ×‘×—×¨×• ×›××•×ª ×–×•×’×™×ª.');
                 return;
            }
            
            const essentialOil = essentialOilInput.value;
            const blessing = blessingInput.value.trim();
            
            const copies = copiesInput.value;
            const totalPrice = paymentTotalAmount.textContent;
            
            if (!name || !phone || !email || !city || !address || !babyAge) {
                alert('×× × ××œ××• ××ª ×›×œ ×¤×¨×˜×™ ×”××©×œ×•×— ×•×”×”×ª×××” ×”××™×©×™×ª (×›×•×œ×œ ×’×™×œ ×”×ª×™× ×•×§).');
                return;
            }
            
            currentOrderData = { name, phone, email, city, address, copies, totalPrice, babyAge, allergies, recipe, shape, essentialOil, blessing }; 

            closeModal(shippingModal);
            paymentModal.classList.add('show');
        });

        openBitApp.addEventListener('click', ()=>{
            sendOrderEmail(); // Send the order details via email
            
            // Redirect to BitPay link (Placeholder - replace with Coral's link if needed)
            window.open('https://www.bitpay.co.il/app/me/9364874B-AF78-48EC-1189-1141F63194B7269A', '_blank');

            // Close the modal after submission
            closeModal(paymentModal);
        });

        document.querySelectorAll('.close-modal').forEach(button => {
            button.addEventListener('click', () => {
                const modalId = button.dataset.modal || (button.closest('.modal') ? button.closest('.modal').id : null);
                if (modalId === 'paymentModal') {
                    // Back to shipping form from payment
                    closeModal(document.getElementById(modalId));
                    shippingModal.classList.add('show');
                } else if (modalId) {
                    closeModal(document.getElementById(modalId));
                }
            });
        });

        document.querySelectorAll('.modal').forEach(modal => {
            modal.addEventListener('click', (e) => {
                if (e.target.classList.contains('modal')) {
                    closeModal(modal);
                }
            });
        });

        // Add event listeners for new select elements to ensure they update the form state (though not price)
        recipeInput.addEventListener('change', ()=>{});
        shapeInput.addEventListener('change', ()=>{});
        essentialOilInput.addEventListener('change', ()=>{});
        blessingInput.addEventListener('input', ()=>{});
    </script>
</body>
</html>
